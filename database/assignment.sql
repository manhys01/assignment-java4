-- MySQL Script generated by MySQL Workbench
-- Mon Feb 19 22:36:26 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema assignment
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `assignment` ;

-- -----------------------------------------------------
-- Schema assignment
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `assignment` DEFAULT CHARACTER SET utf8 ;
USE `assignment` ;

-- -----------------------------------------------------
-- Table `assignment`.`categories`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `assignment`.`categories` ;

CREATE TABLE IF NOT EXISTS `assignment`.`categories` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `Name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `Name_UNIQUE` (`Name` ASC))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `assignment`.`manufacturers`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `assignment`.`manufacturers` ;

CREATE TABLE IF NOT EXISTS `assignment`.`manufacturers` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `CompanyName` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `assignment`.`orderstates`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `assignment`.`orderstates` ;

CREATE TABLE IF NOT EXISTS `assignment`.`orderstates` (
  `ID` INT(11) NOT NULL,
  `Name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `assignment`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `assignment`.`users` ;

CREATE TABLE IF NOT EXISTS `assignment`.`users` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `Username` VARCHAR(32) NOT NULL,
  `Password` VARCHAR(32) NOT NULL,
  `Name` VARCHAR(45) NOT NULL,
  `Phone` VARCHAR(45) NOT NULL,
  `Address` VARCHAR(255) NOT NULL,
  `Email` VARCHAR(255) NOT NULL,
  `IsAdmin` TINYINT(1) NULL DEFAULT '0',
  `Created` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `Blocked` TINYINT(1) NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `Username_UNIQUE` (`Username` ASC),
  UNIQUE INDEX `Email_UNIQUE` (`Email` ASC))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `assignment`.`orders`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `assignment`.`orders` ;

CREATE TABLE IF NOT EXISTS `assignment`.`orders` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `UserID` INT(11) NOT NULL,
  `Amount` FLOAT NOT NULL,
  `CustomerName` VARCHAR(45) NOT NULL,
  `Shipping_Address` VARCHAR(255) NOT NULL,
  `PhoneNumber` VARCHAR(15) NOT NULL,
  `OrderState` INT(11) NOT NULL DEFAULT '1',
  `Created` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `Updated` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `Fixer` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_orders_orderstates_idx` (`OrderState` ASC),
  INDEX `fk_orders_users1_idx` (`UserID` ASC),
  CONSTRAINT `fk_orders_orderstates`
    FOREIGN KEY (`OrderState`)
    REFERENCES `assignment`.`orderstates` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_orders_users1`
    FOREIGN KEY (`UserID`)
    REFERENCES `assignment`.`users` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `assignment`.`products`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `assignment`.`products` ;

CREATE TABLE IF NOT EXISTS `assignment`.`products` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `CategoryID` INT(11) NOT NULL,
  `ManufacturerID` INT(11) NOT NULL,
  `Name` VARCHAR(100) NOT NULL,
  `Price` FLOAT NOT NULL,
  `Image` VARCHAR(300) NULL DEFAULT NULL,
  `InStock` INT(11) NOT NULL,
  `Discontinued` TINYINT(1) NOT NULL DEFAULT '1',
  `Description` TEXT NOT NULL,
  `Created` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `LatestUpdate` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `fk_products_categories1_idx` (`CategoryID` ASC),
  INDEX `fk_products_manufacturers1_idx` (`ManufacturerID` ASC),
  CONSTRAINT `fk_products_categories1`
    FOREIGN KEY (`CategoryID`)
    REFERENCES `assignment`.`categories` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_products_manufacturers1`
    FOREIGN KEY (`ManufacturerID`)
    REFERENCES `assignment`.`manufacturers` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `assignment`.`orderdetails`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `assignment`.`orderdetails` ;

CREATE TABLE IF NOT EXISTS `assignment`.`orderdetails` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `ProductID` INT(11) NOT NULL,
  `OrderID` INT(11) NOT NULL,
  `Quantity` INT(11) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_OrderDetails_orders1_idx` (`OrderID` ASC),
  INDEX `fk_OrderDetails_products1_idx` (`ProductID` ASC),
  CONSTRAINT `fk_OrderDetails_orders1`
    FOREIGN KEY (`OrderID`)
    REFERENCES `assignment`.`orders` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OrderDetails_products1`
    FOREIGN KEY (`ProductID`)
    REFERENCES `assignment`.`products` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


-- USERS
INSERT INTO `assignment`.`users` (`ID`, `Username`, `Password`, `Name`, `Phone`, `Address`, `Email`, `IsAdmin`, `Blocked`) VALUES ('1', 'default', 'default', 'default', '0123456789', 'default', 'default', '0', '1');
INSERT INTO `assignment`.`users` (`ID`, `Username`, `Password`, `Name`, `Phone`, `Address`, `Email`, `IsAdmin`, `Blocked`) VALUES ('2', 'admin', 'admin', 'admin', '0123456798', 'abc', 'admin@manhnd.vn', '1', '0');
INSERT INTO `assignment`.`users` (`Username`, `Password`, `Name`, `Phone`, `Address`, `Email`) VALUES ('anhvvt', '123', 'Vũ Văn Tiến Anh', '0952453456', 'Thôn Bình Định, xã Bình Định, huyện Lương Tài, tỉnh Bắc Ninh', 'anhvvt@gmail.com');
INSERT INTO `assignment`.`users` (`Username`, `Password`, `Name`, `Phone`, `Address`, `Email`) VALUES ('manhnd', '123', 'Nguyễn Đức Mạnh', '0969216538', 'Số 8D, Ngõ 29, Phố Dịch Vọng, Cầu Giấy, Hà Nội', 'manhnd2261995@gmail.com');
INSERT INTO `assignment`.`users` (`Username`, `Password`, `Name`, `Phone`, `Address`, `Email`) VALUES ('thaiqd', '123', 'Quỳnh Duy Thái', '0942435284', 'Số 192A, Quán Thánh, Ba Đình, Hà Nội', 'thaiqd@gmail.com');

-- OrderStates
INSERT INTO `assignment`.`orderstates` (`ID`, `Name`) VALUES ('1', 'Chờ xác nhận');
INSERT INTO `assignment`.`orderstates` (`ID`, `Name`) VALUES ('2', 'Đã xác nhận');
INSERT INTO `assignment`.`orderstates` (`ID`, `Name`) VALUES ('3', 'Hoàn tất');
INSERT INTO `assignment`.`orderstates` (`ID`, `Name`) VALUES ('4', 'Hủy');

-- Categories
INSERT INTO `assignment`.`categories` (`ID`, `Name`) VALUES ('1', 'Laptop');
INSERT INTO `assignment`.`categories` (`ID`, `Name`) VALUES ('2', 'Tablet');
INSERT INTO `assignment`.`categories` (`ID`, `Name`) VALUES ('3', 'Tivi');
INSERT INTO `assignment`.`categories` (`ID`, `Name`) VALUES ('4', 'Smartphone');

-- Manufacturers
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('Dell');
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('Apple');
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('Microsoft');
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('Asus');
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('Samsung');
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('Sony');
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('LG');
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('MSI');
INSERT INTO `assignment`.`manufacturers` (`CompanyName`) VALUES ('Lenovo');

-- Products
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('1', '1', 'Dell Inspiron 3567 i3 6006U/4GB/1TB/Win10', '11390000', 'images/dell.png', '10', '0', 'CPU: Intel Core i3 Skylake, 6006U, 2.00 GHz RAM: 4 GB, DDR4 (2 khe), 2400 MHz Ổ cứng: HDD: 1 TB Màn hình: 15.6 inch, HD (1366 x 768) Card màn hình: Card đồ họa tích hợp, Intel® HD Graphics 520 Cổng kết nối: 2 x USB 3.0, HDMI, LAN (RJ45), USB 2.0 Hệ điều hành: Windows 10 Thiết kế: Vỏ nhựa, PIN rời Kích thước: Dày 23.65 mm, 2.25 kg');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('1', '1', 'Dell Vostro 3568 i5 7200U/4GB/1TB/2GB M420/Win10', '15490000', 'images/dell.png', '11', '0', 'CPU: Intel Core i5 Kabylake, 7200U, 2.50 GHz RAM: 4 GB, DDR4 (2 khe), 2133 MHz Ổ cứng: HDD: 1 TB Màn hình: 15.6 inch, HD (1366 x 768) Card màn hình: Card đồ họa rời, AMD Radeon R5 M420, 2 GB Cổng kết nối: 2 x USB 3.0, HDMI, LAN (RJ45), USB 2.0, VGA (D-Sub) Hệ điều hành: Windows 10 Thiết kế: Vỏ nhựa, PIN rời Kích thước: Dày 23.65 mm, 2.18 kg');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('1', '1', 'Dell Vostro 5568 i5 7200U/4GB/1TB/2GB 940MX/Win10', '17990000', 'images/dell.png', '30', '0', 'CPU: Intel Core i5 Kabylake, 7200U, 2.50 GHz RAM: 4 GB, DDR4 (2 khe), 2400 MHz Ổ cứng: HDD: 1 TB Màn hình: 15.6 inch, HD (1366 x 768) Card màn hình: Card đồ họa rời, NVIDIA GeForce 940MX, 2 GB Cổng kết nối: 3 x USB 3.0, HDMI, LAN (RJ45), USB 2.0, VGA (D-Sub) Đặc biệt: Có đèn bàn phím Hệ điều hành: Windows 10 Thiết kế: Vỏ nhựa - nắp lưng bằng kim loại, PIN liền Kích thước: Dày 19.2 mm, 1.98 kg');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('1', '2', 'Apple Macbook Air MQD32SA/A i5 1.8GHz/8GB/128GB (2017)', '23990000', 'images/macbook.png', '60', '0', 'CPU: Intel Core i5 Broadwell, 1.80 GHz RAM: 8 GB, DDR3L(On board), 1600 MHz Ổ cứng: SSD: 128 GB Màn hình: 13.3 inch, WXGA+(1440 x 900) Card màn hình: Card đồ họa tích hợp, Intel HD Graphics 6000 Cổng kết nối: MagSafe 2, 2 x USB 3.0, Thunderbolt 2 Đặc biệt: Có đèn bàn phím Hệ điều hành: Mac OS Thiết kế: Vỏ kim loại nguyên khối, PIN liền Kích thước: Dày 17 mm, 1.35 Kg');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('1', '2', 'Apple Macbook 12\" MNYK2SA/A Core M 1.2GHz/8GB/256GB (2017)', '33990000', 'images/macbook.png', '45', '0', 'CPU: Intel Core M, M3, 1.20 GHz RAM: 8 GB, DDR3 (on board), 1866 MHz Ổ cứng: SSD: 256 GB Màn hình: 12 inch, Retina (2304 x 1440) Card màn hình: Card đồ họa tích hợp, Intel® HD Graphics 615 Cổng kết nối: USB Type-C Đặc biệt: Có đèn bàn phím Hệ điều hành: Mac OS Thiết kế: Vỏ kim loại nguyên khối, PIN liền Kích thước: Dày 13.1 mm, 0.9 kg');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('1', '4', 'Asus S510UA i3 7100U/4GB/1TB/Win10', '13290000', 'images/asus.png', '7', '0', 'CPU:	Intel Core i3 Kabylake, 7100U, 2.30 GHz');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('2', '2', 'iPad Pro 10.5 inch Wifi 64GB (2017)', '16990000', 'images/ipad.png', '33', '0', 'Màn hình	LED backlit LCD, 10.5\"');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('2', '2', 'iPad Wifi 32GB (2017)', '9890000', 'images/ipad.png', '31', '0', 'Màn hình	LED backlit LCD, 9.7\"');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('4', '2', 'iPhone X 256GB', '34299000', 'images/iphonex.png', '70', '0', 'Màn hình:	OLED, 5.8\", Super Retina');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('4', '2', 'iPhone 8 64GB', '20990000', 'images/iphone8.png', '100', '0', 'Màn hình:	LED-backlit IPS LCD, 4.7\", Retina HD');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('2', '3', 'Surface Pro 4 128GB / Intel Core m3 - 4GB RAM', '16990000', 'images/surface-pro.png', '77', '0', 'CPU: Intel Core M3');
INSERT INTO `assignment`.`products` (`CategoryID`, `ManufacturerID`, `Name`, `Price`, `Image`, `InStock`, `Discontinued`, `Description`) VALUES ('1', '3', 'Surface Book 128GB / Core Intel i5 - 8GB', '29900000', 'images/surface-book.png', '33', '0', 'CPU: Intel Core i5-6300U Skylake tốc độ 2.4GHz (Max 3.0GHz)');

